(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4ee4"],{"0916":function(n,e,o){"use strict";o.r(e);var t=function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("div",[o("div",{staticClass:"row m-4"},[o("div",{staticClass:"col-md-8 col-12"},[o("CodeContainer",{attrs:{title:""},scopedSlots:n._u([{key:"sourceCode",fn:function(){return[o("pre",[n._v('public Person queryWithMutex(String key) {\n    String json = stringRedisTemplate.opsForValue().get(key);\n    if (Strings.isNotEmpty(json)) {\n        return gson.fromJson(json, Person.class);\n    }\n    Person person = null;\n    String lockKey = "lock_" + key;\n    try {\n        boolean isLock = getLock(lockKey);\n        if (!isLock) {\n            Thread.sleep(2000);\n            return queryWithMutex(key);\n        }\n        // 查詢資料庫 重建緩存\n        Thread.sleep(1000);\n        person = new Person();\n        stringRedisTemplate.opsForValue().set(key, gson.toJson(person), 5, TimeUnit.MINUTES);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    } finally {\n        removeLock(lockKey);\n    }\n    return person;\n}\n            ')])]},proxy:!0}])})],1)])])},r=[],s=o("32f4"),i={name:"Mutex",components:{CodeContainer:s["a"]}},c=i,l=o("2877"),a=Object(l["a"])(c,t,r,!1,null,null,null);e["default"]=a.exports}}]);
//# sourceMappingURL=chunk-2d0a4ee4.3454ad4b.js.map